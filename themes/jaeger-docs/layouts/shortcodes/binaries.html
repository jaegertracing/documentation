{{- $binaries := .Site.Data.download.binaries }}
{{- $fullReleaseVersions    := index $binaries "fullReleaseVersions" }}
{{- $partialReleaseVersions := index $binaries "partialReleaseVersions" }}
{{- $platforms              := index $binaries "platforms" }}
{{- $platformInfo           := index $binaries "platformInfo" }}
<table>
  <thead>
    <tr>
      <th>
        Version
      </th>
      <th>
        Assets
      </th>
    </tr>
  </thead>
  <tbody>
    {{- range sort $fullReleaseVersions "value" "desc" }}
    {{- $version := . }}
    {{- $zipUrl := printf "https://github.com/jaegertracing/jaeger/archive/v%s.zip" $version }}
    {{- $tarUrl := printf "https://github.com/jaegertracing/jaeger/archive/v%s.tar.gz" $version }}
    <tr>
      <td>
        <strong>
          {{ $version }}
        </strong>
      </td>
      <td>
        <p class="buttons">
          {{- range $platforms }}
          {{- $info := index $platformInfo . }}
          {{- $name := index $info "name" }}
          {{- $icon := index $info "icon" }}
          {{- $asset := printf "jaeger-%s-%s-amd64.tar.gz" $version . }}
          {{- $url   := printf "https://github.com/jaegertracing/jaeger/releases/download/v%s/%s" $version $asset }}
          {{- $zipUrl := printf "https://github.com/jaegertracing/jaeger/archive/v%s.zip" $version }}
          {{- $tarUrl := printf "https://github.com/jaegertracing/jaeger/archive/v%s.tar.gz" $version }}
          <a class="button is-info is-medium">
            <span class="icon">
              <i class="fab {{ $icon }}"></i>
            </span>
            <span>
              {{ $name }}
            </span>
          </a>
          {{- end }}
          <a class="button is-info is-medium" href="{{ $zipUrl }}">
            <span class="icon">
              <i class="fas fa-file-archive"></i>
            </span>
            <span>
              Source code (zip)
            </span>
          </a>
          <a class="button is-info is-medium" href="{{ $tarUrl }}">
            <span class="icon">
              <i class="fas fa-file-archive"></i>
            </span>
            <span>
              Source code (tar.gz)
            </span>
          </a>
        </p>
      </td>
    </tr>
    {{- end }}
    {{- range sort $partialReleaseVersions "value" "desc" }}
    {{- $version := . }}
    {{- $zipUrl := printf "https://github.com/jaegertracing/jaeger/archive/v%s.zip" $version }}
    {{- $tarUrl := printf "https://github.com/jaegertracing/jaeger/archive/v%s.tar.gz" $version }}
    <tr>
      <td>
        <strong>
          {{ $version }}
        </strong>
      </td>
      <td>
        <a class="button is-info is-medium" href="{{ $zipUrl }}">
          <span class="icon">
            <i class="fas fa-file-archive"></i>
          </span>
          <span>
            Source code (zip)
          </span>
        </a>
        <a class="button is-info is-medium" href="{{ $tarUrl }}">
          <span class="icon">
            <i class="fas fa-file-archive"></i>
          </span>
          <span>
            Source code (tar.gz)
          </span>
        </a>
      </td>
    </tr>
    {{- end }}
  </tbody>
</table>